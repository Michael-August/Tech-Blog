{"ast":null,"code":"import { CommentComponent } from '../comments/comment.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/post.services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../comments/comment.component\";\nexport let PostBodyComponent = /*#__PURE__*/(() => {\n  class PostBodyComponent {\n    constructor(postService, route) {\n      this.postService = postService;\n      this.route = route;\n      this.postDetail = null;\n      this.comments = [];\n    }\n\n    ngOnInit() {\n      this.postService.getPostById(this.route.snapshot.params['id']).subscribe(res => {\n        this.postDetail = res;\n        console.log(this.postDetail.comments);\n        this.attarchCommentToPost();\n      });\n    }\n\n    attarchCommentToPost() {\n      this.postService.getComments().subscribe(res => {\n        console.log(res);\n        this.comments = res;\n        console.log(this.postDetail);\n        this.postComment = this.comments.filter(c => {\n          return c.postId === this.postDetail.id;\n        });\n        console.log(this.postComment);\n\n        if (this.postDetail.comments) {\n          this.postDetail.comments = [...this.postComment];\n          console.log(this.postDetail.comments);\n        } else {\n          this.postDetail.comments = [...this.postComment];\n          console.log(this.postDetail.comments);\n        }\n      });\n    }\n\n    addComment(newComment) {\n      this.postService.createComments(newComment).subscribe(res => {\n        this.comments.unshift(newComment);\n        this.attarchCommentToPost();\n        this.commentComponent.commentForm.nativeElement.value = '';\n      });\n    }\n\n    likeFunc(id) {\n      this.postService.getCommentsById(id).subscribe(res => {});\n    }\n\n  }\n\n  PostBodyComponent.ɵfac = function PostBodyComponent_Factory(t) {\n    return new (t || PostBodyComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  PostBodyComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PostBodyComponent,\n    selectors: [[\"app-post-body\"]],\n    viewQuery: function PostBodyComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(CommentComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.commentComponent = _t.first);\n      }\n    },\n    decls: 37,\n    vars: 3,\n    consts: [[\"id\", \"content\", \"role\", \"main\", 1, \"content\"], [1, \"wraps\"], [1, \"post\", \"featured\"], [1, \"post-content\"], [1, \"post-footer\"], [1, \"author-image\"], [\"href\", \"author.html\", 1, \"img\", 2, \"background-image\", \"url(assets/img/gravatar.jpg\"], [1, \"hidden\"], [1, \"author\"], [\"href\", \"\"], [1, \"author-meta\"], [1, \"author-location\", \"icon-location\"], [1, \"author-link\", \"icon-link\"], [\"href\", \"https://www.wowthemes.net\"], [1, \"share\"], [\"href\", \"https://twitter.com/intent/tweet?text=Once%20Upon%20a%20Time&url=#\", \"onclick\", \"window.open(this.href, 'twitter-share', 'width=550,height=235');return false;\", 1, \"icon-twitter\"], [\"href\", \"https://www.facebook.com/sharer/sharer.php?u=#\", \"onclick\", \"window.open(this.href, 'facebook-share','width=580,height=296');return false;\", 1, \"icon-facebook\"], [\"href\", \"https://plus.google.com/share?url=#\", \"onclick\", \"window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;\", 1, \"icon-google-plus\"], [3, \"comments\", \"newComment\", \"like\"], [1, \"clearfix\"]],\n    template: function PostBodyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"article\", 2);\n        i0.ɵɵelementStart(3, \"section\", 3);\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"footer\", 4);\n        i0.ɵɵelementStart(7, \"figure\", 5);\n        i0.ɵɵelementStart(8, \"a\", 6);\n        i0.ɵɵelementStart(9, \"span\", 7);\n        i0.ɵɵtext(10, \"David's Picture\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"section\", 8);\n        i0.ɵɵelementStart(12, \"h4\");\n        i0.ɵɵelementStart(13, \"a\", 9);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\");\n        i0.ɵɵtext(16, \" The blog combining journalist August's years of experience covering computer and tech for among others. Read my blog and you will learn how to become a tech proffessional \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 10);\n        i0.ɵɵelementStart(18, \"span\", 11);\n        i0.ɵɵtext(19, \"Europe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"span\", 12);\n        i0.ɵɵelementStart(21, \"a\", 13);\n        i0.ɵɵtext(22, \"https://www.wowthemes.net\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"section\", 14);\n        i0.ɵɵelementStart(24, \"h4\");\n        i0.ɵɵtext(25, \"Share this post\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"a\", 15);\n        i0.ɵɵelementStart(27, \"span\", 7);\n        i0.ɵɵtext(28, \"Twitter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"a\", 16);\n        i0.ɵɵelementStart(30, \"span\", 7);\n        i0.ɵɵtext(31, \"Facebook\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"a\", 17);\n        i0.ɵɵelementStart(33, \"span\", 7);\n        i0.ɵɵtext(34, \"Google+\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"comment\", 18);\n        i0.ɵɵlistener(\"newComment\", function PostBodyComponent_Template_comment_newComment_35_listener($event) {\n          return ctx.addComment($event);\n        })(\"like\", function PostBodyComponent_Template_comment_like_35_listener($event) {\n          return ctx.likeFunc($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"div\", 19);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.postDetail == null ? null : ctx.postDetail.body);\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate(ctx.postDetail == null ? null : ctx.postDetail.author);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"comments\", ctx.postDetail == null ? null : ctx.postDetail.comments);\n      }\n    },\n    directives: [i3.CommentComponent],\n    styles: [\".post[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:20px;margin-left:7em;margin-right:7em;line-height:2em;opacity:.8}h4[_ngcontent-%COMP%]{font-weight:700}h2[_ngcontent-%COMP%]{font-weight:900;font-size:1.4em}\"]\n  });\n  return PostBodyComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}